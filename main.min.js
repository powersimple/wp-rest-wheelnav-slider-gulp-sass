var icon='<svg class="sg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 185.31 251.89"><path d="M66.8,144.17c0-66.24,22.46-113.09,80.72-112.32,81.48,1.07,80.72,46.08,80.72,112.32,0,5.15,8.38,3.81,7.62,19-2.28,19.42-9.44,14.63-10.39,19.85-9.26,51.08-40.65,88.67-77.95,88.67-37.76,0-69.47-38.53-78.28-90.58-.82-4.85-5.86-.8-6.42-18.68C61.47,146.07,66.8,149.07,66.8,144.17Z" transform="translate(-56.6 -25.84)" style="fill:#ffdfbf;fill-rule:evenodd"/><path d="M147.52,31.85C99.49,31.22,75.79,63,69,111.24c8.78-23.84,27.86-26,64.33-26.54,70.62-1.13,88.39,8.27,79.64,96.55-1.84,18.6-6.1,24.62-28.36,39.74-12.07,8.2,18.54-26.37-49.78-27-49.5-.43-30.06,36.41-40.06,29.44a81.88,81.88,0,0,1-20.28-20.73c12.89,40.76,40.76,69,73.08,69,37.3,0,68.69-37.59,77.95-88.67l2.77-38.89C228.24,77.93,229,32.91,147.52,31.85Z" transform="translate(-56.6 -25.84)" style="fill:#d0b57b;fill-rule:evenodd"/><path d="M146.13,31.84h1.39c81.48,1.07,80.72,46.08,80.72,112.33,0,5.15,8.38,3.81,7.62,19-2.28,19.42-9.44,14.63-10.39,19.85-9.26,51.08-40.65,88.67-77.95,88.67-37.76,0-69.47-38.53-78.28-90.58-.82-4.85-5.86-.8-6.42-18.68-1.34-16.39,4-13.39,4-18.29,0-65.71,22.11-112.33,79.33-112.33m0-6h0c-29.39,0-51.65,11.54-66.18,34.3C67.3,80,60.86,108.06,60.8,143.68h0c-2.54,3.05-4.94,7-4,19.12.4,12.11,2.72,16.46,6.59,19.86,9.65,56,44.19,95.07,84.11,95.07,19.91,0,38.59-9.42,54-27.25,14.35-16.57,24.87-39.79,29.66-65.45l0,0c4.22-2.57,8.87-6.53,10.58-21.1l0-.2v-.2c.58-11.55-3.35-16.18-7.07-19.61l-.53-.5v-1c0-33,0-61.46-10.76-82.11-12-23-36.09-33.89-75.88-34.41Z" transform="translate(-56.6 -25.84)" style="fill:#303030"/><path d="M118.31,183.29s4.28,4.28,12.84,4S143.67,182,143.67,182s-3.62,8.23-11.53,8.89S118.31,183.29,118.31,183.29Z" transform="translate(-56.6 -25.84)" style="fill:#bfa78f;fill-rule:evenodd"/><ellipse cx="44.24" cy="115.64" rx="28.15" ry="35.97" style="fill:#fff"/><ellipse cx="104.54" cy="115.64" rx="28.15" ry="35.97" style="fill:#fff"/><circle class="eye" id="eye-left" cx="35.9" cy="121.66" r="10.5" style="fill:#303030"/><circle class="eye" cx="94.57" cy="121.66" r="10.5" style="fill:#303030"/><path d="M140.74,236.63h0c-16.92,0-29.43-4.38-29.43-18.42h0c0-4.22,4.12-7.64,9.21-7.64H160c3.6,0,6.53,2.42,6.53,5.42v7.23C166.55,234.48,154.32,236.63,140.74,236.63Z" transform="translate(-56.6 -25.84)" style="fill:#2d251d;fill-rule:evenodd"/><path d="M160,210.57h-39.5c-5.09,0-9.21,3.42-9.21,7.64,0,.07,0,.15,0,.22,7.57,2.29,17.6,3.2,29,3.2h0c9.87,0,19.24-.52,26.25-2.36V216C166.55,213,163.62,210.57,160,210.57Z" transform="translate(-56.6 -25.84)" style="fill:#fff"/></svg>';document.head.insertAdjacentHTML("beforeend","<style>.sg { width: 35px; height: 35px; position: fixed; bottom: 10px; right: 10px; } .sg .eye { -webkit-transform: translateX(0px);   transform: translateX(0px); } .sg:hover .eye { -webkit-transition: -webkit-transform 0.3s ease; transition: -webkit-transform 0.3s ease; transition: transform 0.3s ease; transition: transform 0.3s ease, -webkit-transform 0.3s ease; -webkit-transform: translateX(12px);   transform: translateX(12px); }</style>");var a=document.createElement("a");a.setAttribute("href","https://twitter.com/steeevg"),a.setAttribute("target","_blank"),a.innerHTML=icon;var increment="vw";oriented="horizontal",orientation_last="",slider_orientation="vertical",dimension="wide",maxed=!1,maxed_last=!1,maxed_changed=!1,slider_menu="wheel-menu",_w=jQuery(window).width(),_h=jQuery(window).height(),aspect=_w/_h,current_notch=0;var wheel_nav_params={};function initSite(){null!=menus&&null!=media&&null!=posts||window.setTimeout(initSite(),100);var e="about";"#undefined"==location.hash||""==location.hash?(e="about",location.hash="#about"):e=location.hash.replace("#","");var t=menus["wheel-menu"].slug_nav[e];setSlider(),setSlides("wheel-menu"),setSlides("projects"),setSlideShow("wheel-menu"),makeWheelNav("outer-nav",menus["wheel-menu"].menu_levels),setSliderNotch(t),initMatrix()}function setWheelNavParams(){wheel_nav_params={maxPercent:1,min:.91,max:1,sel_min:.91,sel_max:1},1==maxed&&(wheel_nav_params={maxPercent:1,min:.85,max:1,sel_min:.85,sel_max:1})}function positionElements(){var t=["#main","header","footer","#related","#screen"];for(slider_orientation="vertical",dimension="wide",_w<_h?(oriented="vertical",slider_orientation="horizontal"):(oriented="horizontal",slider_orientation="vertical"),orientation_last!=oriented&&(orientation_last=oriented,setSlider()),aspect<=.5?dimension="super-narrow":.5<aspect&&aspect<=.75?dimension="narrow":.75<aspect&&aspect<=.9?dimension="semi-narrow":.9<aspect&&aspect<=1.1?dimension="square":1.1<aspect&&aspect<=1.25?dimension="semi-wide":1.25<aspect&&aspect<=1.5?dimension="wide":1.5<aspect&&aspect<=2?dimension="super-wide":2<aspect&&(dimension="extra-super-wide"),e=0;e<t.length;e++)jQuery(t[e]).removeClass(),jQuery(t[e]).addClass(dimension),jQuery(t[e]).addClass(oriented),1==maxed&&jQuery(t[e]).addClass("maxed");jQuery("#slider-wrap").removeClass(),jQuery("#slider-wrap").addClass(slider_orientation),jQuery("#slider-wrap").addClass(dimension)}function positionProjector(){1.15<aspect&&aspect<1.5?aspect:.5<aspect&&aspect<=1.15||aspect}function reposition_screen(){var e="100vw",t="100vh",n=0,i=0,a=0,s=0,r="vh";aspect<=.5?(e=_w+"px",t=2*_w+"px",n=50,i=0,a=-1*_w,s=0,_w,r="px"):2<=aspect&&(e=2*_h+"px",t=_h+"px",i=50,a=n=0,s=-1*_h,r="px"),jQuery("#main").css("width",e),jQuery("#main").css("height",t),jQuery("#main").css("top",n+"%"),jQuery("#main").css("left",i+"%"),jQuery("#main").css("marginTop",a+r),jQuery("#main").css("marginLeft",s+r),positionProjector(),positionElements(),jQuery("#slider").css("visibility","visible");jQuery("#stars").css("height","100vh"),jQuery("#stars").css("width","100vw"),jQuery("#stars").css("top",0),jQuery("#stars").css("left",0)}function isMaxed(){maxed_changed=!1,aspect<.75&&_w<768||1.5<aspect&&_h<640?(maxed=!0,0==maxed_last&&(maxed_last=!0,maxed_changed=!0)):(maxed=!1,1==maxed_last&&(maxed_last=!1,maxed_changed=!0)),1==maxed_changed&&null!=wheels["outer-nav"]&&(wheels["outer-nav"].raphael.remove(),popAWheelie("outer-nav"),makeWheelNav("outer-nav",menus["wheel-menu"].menu_levels))}function resetWheel(){setWheelNavParams(),wheels["outer-nav"].removeWheel(),null!=wheels["inner-nav"]&&wheels["inner-nav"].removeWheel(),null!=wheels["inner-subnav"]&&wheels["inner-subnav"].removeWheel()}function calibrateCircle(e,t,n){}jQuery(document).ready(function(){jQuery(".wheelnav-outer-nav-title").css("display:none;"),reposition_screen()}),jQuery(window).resize(function(){_w=jQuery(window).width(),_h=jQuery(window).height(),_w>_h?(increment="vh",oriented="horizontal"):(increment="vw",oriented="vertical"),aspect=_w/_h,reposition_screen()});var photoCount=0,pieceCount=0,onPhoto=0,pieceCompleteCount=0,transitions=["center","random"],transitionType=1,viewerDest=null;function circleViewer(e){photoCount=state.screen_images.length,pieceCount=state.screen_images.length,viewerDest=e;for(var t=0;t<state.screen_images.length;t++)jQuery("#preload").append('<img src="'+state.screen_images[t].src+'">');jQuery(window).load(function(){}),loadCircleViewer(e)}function loadCircleViewer(e,t){jQuery(e+"-container").html("");for(var n=0;n<state.screen_images.length;n++){var i=(100-100/pieceCount*n)/100*100,a=100+(100-i)/i*100,s=100/pieceCount*n/2;jQuery(e+"-container").append('<div class="section" id="piece'+n+'" style="top: '+s+"%; left: "+s+"%; width: "+i+"%; height: "+i+"%; background-size:"+a+"%; background-image: url("+state.screen_images[n].src+')"></div>')}nextSlide()}function nextSlide(){clearInterval(state.circle_delay),pieceCompleteCount=0,photoCount<=++onPhoto&&(onPhoto=0);for(var e=0;e<state.screen_images.length;e++){var t=0,n=360,i=jQuery("#piece"+e),a=state.screen_images[onPhoto];switch(transitions[transitionType]){case"random":t=Math.random()/2,n=360*Math.random();break;case"center":t=(pieceCount-e)/10,n=181}TweenMax.to(i,1,{delay:t,directionalRotation:n+"_long",onComplete:completeRotation,onCompleteParams:[i,a],ease:Power4.easeIn})}}function completeRotation(e,t){e.css("background-image","url("+t.src+")"),TweenMax.to(e,2,{directionalRotation:"0_short",onComplete:finishPieceanimation,ease:Elastic.easeOut})}function finishPieceanimation(){++pieceCompleteCount==pieceCount&&(state.circle_delay=setInterval(nextSlide,5e3))}function setSlideContent(e,t){if(null!=posts[t]){var n=posts[t].title.length,i=posts[t].content.length;jQuery("#slide"+t+" h2").html(posts[t].title),console.log("title="+n,"content"+i),jQuery("#slide"+t+" section div.content").html(posts[t].content),$carousel.slick("slickGoTo",e)}}function setText(){"undefined"!=typeof languages?state.language==languages.default?page_title=posts[state.post_id].title+" | "+site_title:page_title=retreiveML("posts","title",state.post_id,state.language):page_title=posts[state.post_id].title+" | "+site_title,document.title=page_title}function setContent(e,t,n){if(state.slide=posts_nav[t],state.object_id=posts_nav[t],jQuery("#projects-content").fadeOut(),jQuery("#project-info").fadeOut(),jQuery("#wheel-menu-content").fadeIn(),null!=posts[t]){state.post_id=t,setText(),setImage(t,"featured","featured_media","flip");uploads_path,posts[t].featured_video.video_path;setVideo(posts[t].featured_video.video_id,"#bg-video"),setRelated(posts[t]),0<posts[t].screen_images.length?setScreenImages(posts[t].screen_images,"#screen-image","circleViewer"):jQuery("#screen-image-container").html("")}setSlideContent(e,t)}!function(a){function i(e,t,n){this.setting={axis:"y",reverse:!1,trigger:"click",speed:500,forceHeight:!1,forceWidth:!1,autoSize:!0,front:".front",back:".back"},this.setting=a.extend(this.setting,t),"string"!=typeof t.axis||"x"!==t.axis.toLowerCase()&&"y"!==t.axis.toLowerCase()||(this.setting.axis=t.axis.toLowerCase()),"boolean"==typeof t.reverse&&(this.setting.reverse=t.reverse),"string"==typeof t.trigger&&(this.setting.trigger=t.trigger.toLowerCase());var i=parseInt(t.speed);isNaN(i)||(this.setting.speed=i),"boolean"==typeof t.forceHeight&&(this.setting.forceHeight=t.forceHeight),"boolean"==typeof t.forceWidth&&(this.setting.forceWidth=t.forceWidth),"boolean"==typeof t.autoSize&&(this.setting.autoSize=t.autoSize),("string"==typeof t.front||t.front instanceof a)&&(this.setting.front=t.front),("string"==typeof t.back||t.back instanceof a)&&(this.setting.back=t.back),this.element=e,this.frontElement=this.getFrontElement(),this.backElement=this.getBackElement(),this.isFlipped=!1,this.init(n)}a.extend(i.prototype,{flipDone:function(e){var t=this;t.element.one(function(){var e,t=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}(),function(){t.element.trigger("flip:done"),"function"==typeof e&&e.call(t.element)})},flip:function(e){if(!this.isFlipped){this.isFlipped=!0;var t="rotate"+this.setting.axis;this.frontElement.css({transform:t+(this.setting.reverse?"(-180deg)":"(180deg)"),"z-index":"0"}),this.backElement.css({transform:t+"(0deg)","z-index":"1"}),this.flipDone(e)}},unflip:function(e){if(this.isFlipped){this.isFlipped=!1;var t="rotate"+this.setting.axis;this.frontElement.css({transform:t+"(0deg)","z-index":"1"}),this.backElement.css({transform:t+(this.setting.reverse?"(180deg)":"(-180deg)"),"z-index":"0"}),this.flipDone(e)}},getFrontElement:function(){return this.setting.front instanceof a?this.setting.front:this.element.find(this.setting.front)},getBackElement:function(){return this.setting.back instanceof a?this.setting.back:this.element.find(this.setting.back)},init:function(t){var n=this,i=n.frontElement.add(n.backElement),e="rotate"+n.setting.axis,a={perspective:2*n.element["outer"+("rotatex"==e?"Height":"Width")](),position:"relative"},s={transform:e+"("+(n.setting.reverse?"180deg":"-180deg")+")","z-index":"0",position:"relative"},r={"backface-visibility":"hidden","transform-style":"preserve-3d",position:"absolute","z-index":"1"};n.setting.forceHeight?i.outerHeight(n.element.height()):n.setting.autoSize&&(r.height="100%"),n.setting.forceWidth?i.outerWidth(n.element.width()):n.setting.autoSize&&(r.width="100%"),(window.chrome||window.Intl&&Intl.v8BreakIterator)&&"CSS"in window&&(a["-webkit-transform-style"]="preserve-3d"),i.css(r).find("*").css({"backface-visibility":"hidden"}),n.element.css(a),n.backElement.css(s),setTimeout(function(){var e=n.setting.speed/1e3||.5;i.css({transition:"all "+e+"s ease-out"}),"function"==typeof t&&t.call(n.element)},20),n.attachEvents()},clickHandler:function(e){e=e||window.event,this.element.find(a(e.target).closest('button, a, input[type="submit"]')).length||(this.isFlipped?this.unflip():this.flip())},hoverHandler:function(){var e=this;e.element.off("mouseleave.flip"),e.flip(),setTimeout(function(){e.element.on("mouseleave.flip",a.proxy(e.unflip,e)),e.element.is(":hover")||e.unflip()},e.setting.speed+150)},attachEvents:function(){var e=this;"click"===e.setting.trigger?e.element.on(a.fn.tap?"tap.flip":"click.flip",a.proxy(e.clickHandler,e)):"hover"===e.setting.trigger&&(e.element.on("mouseenter.flip",a.proxy(e.hoverHandler,e)),e.element.on("mouseleave.flip",a.proxy(e.unflip,e)))},flipChanged:function(e){this.element.trigger("flip:change"),"function"==typeof e&&e.call(this.element)},changeSettings:function(e,t){var n=this,i=!1;if(void 0!==e.axis&&n.setting.axis!==e.axis.toLowerCase()&&(n.setting.axis=e.axis.toLowerCase(),i=!0),void 0!==e.reverse&&n.setting.reverse!==e.reverse&&(n.setting.reverse=e.reverse,i=!0),i){var a=n.frontElement.add(n.backElement),s=a.css(["transition-property","transition-timing-function","transition-duration","transition-delay"]);a.css({transition:"none"});var r="rotate"+n.setting.axis;n.isFlipped?n.frontElement.css({transform:r+(n.setting.reverse?"(-180deg)":"(180deg)"),"z-index":"0"}):n.backElement.css({transform:r+(n.setting.reverse?"(180deg)":"(-180deg)"),"z-index":"0"}),setTimeout(function(){a.css(s),n.flipChanged(t)},0)}else n.flipChanged(t)}}),a.fn.flip=function(t,n){return"function"==typeof t&&(n=t),"string"==typeof t||"boolean"==typeof t?this.each(function(){var e=a(this).data("flip-model");"toggle"===t&&(t=!e.isFlipped),t?e.flip(n):e.unflip(n)}):this.each(function(){if(a(this).data("flip-model")){var e=a(this).data("flip-model");!t||void 0===t.axis&&void 0===t.reverse||e.changeSettings(t,n)}else a(this).data("flip-model",new i(a(this),t||{},n))}),this}}(jQuery);var posts={},taxonomies={},categories={},tags={},menus={},media={},posts_nav={},posts_slug_ids={},last_dest="outer-nav",menu_levels=[],menu_slides=[],related={},data_score=7,data_loaded=[],state={};function getStaticJSON(e,i,a){var t=json_path+e+".json";jQuery.ajax({url:t,data:"",success:function(e,t,n){return i(e,a)},error:function(e,t,n){},cache:!1})}function setData(e){console.log("data",e),setPosts(e.posts),setPosts(e.pages),setCategories(e.categories),setTags(e.tags),setMenus(e.menus),setMedia(e.media),initSite()}function setPosts(e){var t="post";if(Array.isArray(e))for(var n=0;n<e.length;n++)void 0!==e[n].title&&void 0!==e[n].title.rendered&&(e[n].title=e[n].title.rendered),void 0!==e[n].content&&void 0!==e[n].content.rendered&&(e[n].content=e[n].content.rendered),void 0!==e[n].type&&(t=e[n].type,posts[e[n].id]=e[n]);else t=e.type,posts[e.id]=e;if(void 0!==t)switch(t){case t="project":case t="post":case t="page":}return posts}state.featured={transition:{type:"flip",face:"front"}},getStaticJSON("content",setData);var columns,drops,drawnToBottom,canvas=document.getElementById("matrix"),ctx=canvas.getContext("2d"),fontSize=18,chars=generateChars();function generateChars(){for(var e="0123456789",t=0;t<=55;t++)e+=String.fromCharCode(t+65382);return e.split("")}function initMatrix(){canvas.width=window.innerWidth,canvas.height=window.innerHeight,columns=Math.round(canvas.width/fontSize),drops=[];for(var e=0;e<columns;e++)drops[e]=1;drawnToBottom=!1}function draw(){ctx.fillStyle="rgba(0, 0, 0, 0.05)",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.fillStyle="#19FF19",ctx.font="bold "+fontSize+"px monospace";for(var e=drops.length,t=chars.length,n=0;n<e;n++){var i=chars[Math.floor(Math.random()*t)],a=drops[n]*fontSize;ctx.fillText(i,n*fontSize,a),a>canvas.height&&(drawnToBottom=!0),(!drawnToBottom&&.925<Math.random()||drawnToBottom&&.95<Math.random())&&(drops[n]=0),drops[n]++}}function setMedia(e){for(var t=0;t<e.length;t++)media[e[t].id]=e[t].data}function getMediaID(e,t){if(null==posts[id][t])return 0;var n=posts[e][t];return 0<n&&null!=media[n]?n:0}function getImageSRC(e,t,n){if(null==media[e])return"";var i=uploads_path+media[e].path,a=media[e].file;return"image/svg+xml"==media[e].mime?i+a:i+(a="square"==n||1==n?getSquareVersion(media[e].meta.sizes,t):"thumbnail"==n?getSquareVersion(media[e].meta.sizes,t):media[e].meta.sizes[n])}function toggleFace(e,t){return"front"==state[e].transition.face?"back":"front"}function loadTemplate(e,t){var n=jQuery("#"+e+"-template").html();if("flip"==t){var i='<div class="card front">'+n+"</div>",a='<div class="card back">'+n+"</div>";jQuery("#"+e).html(i+a)}else jQuery("#"+e).html(n)}function clearImageText(){}function getAspect(e,t){return e==t?"square":Math.round(e/t)}function setImageContent(e,t,n,i,a,s){setTimeout(function(){jQuery(e+" .title").html(t),jQuery(e+" .caption").html(n),jQuery(e+" .description").html(i),jQuery(e+" .image").attr("alt",a),jQuery(e+" .image").attr("src",s)},250)}function transitionImage(e,t,n){""!=jQuery("#"+e).html()&&state[e].transition==t||loadTemplate(e,state[e].transition.type=t);var i=getImageSRC(n,e+" .image",getAspect(parseInt(jQuery("#"+e).width()),parseInt(jQuery("#"+e).height())));if("flip"==t){var a=toggleFace(e,t);console.log("FLIP",a,e,t,n,i),null!=media[n]?(setImageContent("#"+e+" ."+a,media[n].title,media[n].caption,media[n].desc,media[n].alt,i),state[e].transition.face=a):setImageContent("#"+e+" ."+a,"","","","",""),jQuery("#"+e).toggleClass("is-flipped")}}function setImage(e,t,n,i,a){if(null!=posts[e]){var s=getMediaID(e,n);0<s?(jQuery("#"+t).fadeIn(),transitionImage(t,"flip",s)):jQuery("#"+t).fadeOut()}}function wrapTag(e,t){return"<"+e+">"+t+"</"+e+">"}function setMediaText(e,t){null!=media[e]?(jQuery("#"+t+"-title").html(media[e].title),jQuery("#"+t+"-caption").html(media[e].caption),jQuery("#"+t+"-description").html(media[e].desc),jQuery("#"+t).attr("alt",media[e].alt)):(jQuery("#"+t+"-title").html(""),jQuery("#"+t+"-caption").html(""),jQuery("#"+t+"-description").html(""),jQuery("#"+t).attr("alt",""))}function getSquareVersion(e,t){return box={w:jQuery(t+"-container").width(),h:jQuery(t+"-container").height()},1280<box.w||1280<box.h?e["sq-lg"]:(250<box.w||250<box.h)&&(box.w<=1280||box.h<=1280)?e["sq-med"]:e["sq-sm"]}function setVideo(e,t){if(null!=media[e]){var n=uploads_path+media[e].path,i=media[e].file;jQuery(t+" video source").attr("src",n+i);jQuery(t+" video")[0].load(),jQuery(t+" video source").attr("src",n+i),jQuery(t).fadeIn()}else jQuery(t).fadeOut()}function setScreenImages(e,t,n){for(var i=[],a=0;a<e.length;a++)i.push({src:getImageSRC(e[a],"#screen-image","square"),data:media[e[a]]});0<(state.screen_images=i).length&&"circleViewer"==n&&circleViewer(t,state.screen_images)}window.onresize=function(){initMatrix()};var menu_config={"wheel-menu":{menu_type:"wheel",location:"#outer-nav"},projects:{menu_type:"project",location:"#projects"},"social-links":{menu_type:"social",location:"#social"}};function setMenus(e,t){for(var n=0;n<e.length;n++)menus[e[n].slug]={},menus[e[n].slug].menu_array=[],menus[e[n].slug].name=e[n].name,menus[e[n].slug].slug=e[n].slug,menus[e[n].slug].items=setMenu(e[n].slug,e[n].items);buildMenuData()}function setMenu(e,t){menu={};for(var n=0;n<t.length;n++)menu[t[n].ID]=setMenuItem(e,t[n]),0!=t[n].menu_item_parent&&menu[t[n].menu_item_parent].children.push(t[n].ID),menus[e].menu_array.push(menu[t[n].ID]);return menu}function setMenuItem(e,t){return this_item={},this_item.menu_id=t.ID,this_item.title=t.title,this_item.menu_order=t.menu_order,this_item.object=t.object,this_item.object_id=t.object_id,this_item.parent=t.menu_item_parent,this_item.slug=e,this_item.children=[],this_item}function menu_order(e,t){return e.menu_order<t.menu_order?-1:e.menu_order>t.menu_order?1:0}function setLinearNav(e){for(var t in menus[e].linear_nav=[],menus[e].items)menus[e].items[t].slug=t,id=menus[e].items[t].object_id,menus[e].linear_nav.push(menus[e].items[t]),0;menus[e].linear_nav.sort(menu_order)}function setLinearDataNav(e,t){menus[e].data_nav=[],menus[e].slug_nav=[];for(var n=0,i=0,a=0,s=0,r="outer-nav",o=0;o<t.length;o++){r="outer-nav",t[o].dest=r,t[o].slice=i,a=t[o].notch=n,menus[e].data_nav.push(t[o]),menus[e].slug_nav[t[o].slug]=n,n++;for(var l=0;l<t[o].children.length;l++){t[o].children[l].dest="inner-nav",t[o].children[l].slice=l,t[o].children[l].notch=n,t[o].children[l].parent=a,s=n,menus[e].data_nav.push(t[o].children[l]),menus[e].slug_nav[t[o].children[l].slug]=n,n++;for(var u=0;u<t[o].children[l].children.length;u++)t[o].children[l].children[u].dest="inner-subnav",t[o].children[l].children[u].slice=u,t[o].children[l].children[u].notch=n,t[o].children[l].children[u].grandparent=a,t[o].children[l].children[u].parent=s,menus[e].data_nav.push(t[o].children[l].children[u]),menus[e].slug_nav[t[o].children[l].children[u].slug]=n,n++}i++}}function getSlug(e,t,n,i){if(null!=e){var a=e.slug;null!=posts[e.object_id]&&(a=posts[e.object_id].slug)}return a}function buildMenuData(){if(null==posts)window.setTimeout(buildMenuData(),10);else for(var e in menus){var t=[];if(null!=menu_config[e]){for(var n in menus[e].menu_array=[],menus[e].items)0==menus[e].items[n].parent&&menus[e].menu_array.push(menus[e].items[n]);menus[e].menu_array.sort(menu_order);for(var i=[],a=menus[e].menu_array,s=0;s<a.length;s++){i=[];for(var r=0;r<a[s].children.length;r++){for(var o=[],l=menus[e].items[a[s].children[r]].children,u=0;u<l.length;u++)slug=getSlug(menus[e].items[l[u]],u,"g",l,u),o.push({title:menus[e].items[l[u]].title,slug:slug,object:menus[e].items[l[u]].object,object_id:menus[e].items[l[u]].object_id});slug=getSlug(menus[e].items[a[s].children[r]],"c",a[s].children[r],r),i.push({title:menus[e].items[a[s].children[r]].title,slug:slug,object:menus[e].items[a[s].children[r]].object,object_id:menus[e].items[a[s].children[r]].object_id,children:o})}slug=getSlug(a[s],"o",a,s),t.push({title:a[s].title,slug:slug,object:a[s].object,object_id:a[s].object_id,children:i})}setLinearDataNav(e,menus[e].menu_levels=t),setLinearNav(e)}}}function psConsole(){}function setProject(e){if(state.object_id!=e){var t=posts[e].slug,n=menus.projects.slug_nav[t];jQuery("#wheel-menu-content").fadeOut(),jQuery("#projects-content").fadeIn(),setSlideContent(n,e),setImage(e,"featured","featured_media","flip");uploads_path,posts[e].featured_video.video_path;setVideo(posts[e].featured_video.video_id,"#bg-video"),projectInfo(e),state.object_id=e}}function projectInfo(e){var t=jQuery("#project-info-template").html(),n=posts[e].project_info,i="#project-info";jQuery(i).html(t);var a='<a href="'+n.url+'" target="_blank">Go to </a>';jQuery(i+" .client").html(n.client),jQuery(i+" .agency").html(n.agency),jQuery(i+" .project-url").html(a),jQuery(i+" .era").html(n.era),jQuery("project-info").html(t).fadeIn();for(var s=n.client,r=[],o=0;o<s.length;o++)r.push(s[o])}function setRelated(e){var t=null;related={cats:{},tags:{}};var n={cats:categories,tags:tags};for(var i in related)for(var a=0;a<e[i].length;a++)for(var s=0;s<n[i][e[i][a]].posts.length;s++)if(t=n[i][e[i][a]].posts[s],e.id!=t&&null!=posts[t]){var r=posts[t].type;null==related[i][r]&&(related[i][r]=[]),related[i][r].push(t)}delete n,displayRelated()}function displayRelated(){jQuery("#related").html(""),rel_list="";getAspect(jQuery("#related ul li").width(),jQuery("#related ul li").height());for(var e in related){for(var t in rel_list+='<ul class="'+e+'">',related[e])for(var n=0;n<related[e][t].length;n++){post_id=related[e][t][n];var i="",a="",s=getMediaID(post_id,"featured_media");0<s&&(a=getImageSRC(s,"#related ul li","thumbnail")),""!=a&&(i=' style="background-image:url('+a+')"'),rel_list+="<li "+i+' class="ui-widget '+t+'" data-rel="'+post_id+'">',rel_list+=post_id,rel_list+="</li>"}rel_list+="</ul>"}jQuery("#related").html(rel_list)}function tipHoverContent(e){var t="";return"project"==posts[e].type&&(t+='<span class="hover-title">'+posts[e].project_info.client+"</span>",""!=posts[e].project_info.agency&&(t+='<span class="hover-sub">'+posts[e].project_info.agency+"</span>")),t}function selectRelatedPost(e){"project"==posts[e].type&&setProject(e)}!function(s){s(document).tooltip({items:"[data-rel]",content:function(){var t=s(this).data("rel"),e="",n="",i="",a=getMediaID(t,"featured_media");0!=a&&(i=getImageSRC(a,".rel-tooltip","thumbnail")),""!=i&&(n=' style="background-image:url('+i+')"'),s(this).on("click",function(e){e.preventDefault(),selectRelatedPost(t)}).on("mouseover",function(e){console.log("related1"+t,"mouseover"),e.preventDefault(),console.log("related"+t,"mouseover")}).on("mouseout",function(e){e.preventDefault()}).on("mousedown",function(e){e.preventDefault()}).on("mouseup",function(e){e.preventDefault()}),e+='<div class="rel-tooltip"'+n+">",e+="</div>",console.log(e)}})}(jQuery);var gotoslide=function(e){setSlideContent(notch,menus["wheel-menu"].linear_nav[e].object_id),$(".slideshow").slickGoTo(parseInt(e))};function setSlideShow(e){jQuery(".slideshow").slick({dots:!1,arrows:!0,infinite:!0,speed:1e3,fade:!0,cssEase:"linear",focusoOnSelect:!0})}function setSlide(e,t){return e='\n<div><div id="slide'+t+'" data-id="'+t+'" class="slide-wrap">',e+="\n\t<h2></h2>",e+='\n\t<div class="img-wrap"></div>',e+='\n\t<section><div class="content"></div></section>',e+="\n</div></div>\n"}function setSlides(e){var t="0",n="";if(null==posts)window.setTimeout(setSlides(e),100);else{for(i=0;menus[e].linear_nav[i];i++)t=menus[e].linear_nav[i].object_id.toString(),n+=setSlide(i,t);jQuery("#"+e+"-content").html(n)}}jQuery(".slick-dots li button").on("click",function(e){e.stopPropagation()});var $carousel=jQuery(".slideshow");function setSlider(){null!=menus["wheel-menu"]&&(jQuery("#slider").slider({orientation:slider_orientation,range:"max",min:0,max:menus["wheel-menu"].linear_nav.length,value:0,slide:function(e,t){setSliderNotch(t.value)}}),jQuery(".slick-dots li button").on("click",function(e){e.stopPropagation()}))}function setSliderNotch(e){var t="wheel-menu";null!=state.circle_delay&&clearInterval(state.circle_delay),location.hash=getSlug(menus[t].data_nav[e]),jQuery("#slider").slider("value",e),null!=menus["wheel-menu"].linear_nav[e]&&(setContent(e,menus[t].data_nav[e].object_id,menus[t].data_nav[e].object),triggerWheelNav(e)),current_notch=e}jQuery(document).on("keydown",function(e){37==e.keyCode&&$carousel.slick("slickPrev"),39==e.keyCode&&$carousel.slick("slickNext")}),jQuery("a[data-slide]").click(function(e){e.preventDefault();var t=jQuery(this).data("slide");setSlideContent(notch,menus["wheel-menu"].linear_nav[t].object_id)}),jQuery("#slider").on("mousewheel DOMMouseScroll",function(e){e.preventDefault(),value=jQuery("#slider").slider("value"),null!=value&&NaN!=value||(value=0);var t=e.originalEvent;console.log(jQuery("#slider").slider),-150==t.deltaY?(value<menus["wheel-menu"].linear_nav.length?value+=1:value=0,setSliderNotch(value)):150==t.deltaY&&(0==value?value=menus["wheel-menu"].linear_nav.length:value-=1,setSliderNotch(value))}),function(i){i("div.arrow").on("click",function(e){e.stopPropagation();var t=i(this).attr("id"),n=current_notch;"down-arrow"==t?0==n?n=menus["wheel-menu"].linear_nav.length-1:n--:"up-arrow"==t&&(n==menus["wheel-menu"].linear_nav.length-1?n=0:n++),setSliderNotch(n)})}(jQuery);var camera,scene,renderer,stars=[];function initStars(){(camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,1e3)).position.z=5,scene=new THREE.Scene,(renderer=new THREE.WebGLRenderer).setSize(window.innerWidth,window.innerHeight),jQuery("#stars").append(renderer.domElement)}function addSphere(){for(var e=-1e3;e<1e3;e+=20){var t=new THREE.SphereGeometry(.5,32,32),n=new THREE.MeshBasicMaterial({color:16777215}),i=new THREE.Mesh(t,n);i.position.x=1e3*Math.random()-500,i.position.y=1e3*Math.random()-500,i.position.z=e,i.scale.x=i.scale.y=2,scene.add(i),stars.push(i)}}function animateStars(){for(var e=0;e<stars.length;e++)star=stars[e],star.position.z+=e/10,1e3<star.position.z&&(star.position.z-=2e3)}function render(){requestAnimationFrame(render),renderer.render(scene,camera),animateStars()}function setChildCategories(e){for(var t=0;t<e.length;t++)categories[e[t].id]=e[t];return e}function setCategories(e){for(var t=0;t<e.length;t++)categories[e[t].id]=e[t];return e}function setTags(e){for(var t=0;t<e.length;t++)tags[e[t].id]=e[t];return e}initStars(),addSphere(),render(),jQuery(window).on("resize",function(){renderer.setSize(window.innerWidth,window.innerHeight)}),last_outer_notch=0,last_inner_notch=0;var menu_raphael={},wheels={};function makeWheelNav(e,t,n){setWheelNavParams(),n=wheel_nav_params,"outer-nav"==e?(child_dest="inner-nav",child_params=wheel_nav_params):"inner-nav"==e&&(child_dest="inner-subnav",child_params=wheel_nav_params);var i=[],a=[];for(wheels[e]=new wheelnav(e),wheels[e].spreaderEnable=!1,wheels[e].cssMode=!0,wheels[e].navAngle=270,wheels[e].selectedNavItem=2,wheels[e].selectedNavItemIndex=null,wheels[e].maxPercent=n.maxPercent,wheels[e].slicePathFunction=slicePath().DonutSlice,wheels[e].slicePathCustom=slicePath().PieSliceCustomization(),wheels[e].slicePathCustom.minRadiusPercent=n.min,wheels[e].slicePathCustom.maxRadiusPercent=n.max,wheels[e].sliceSelectedPathCustom=slicePath().PieSliceCustomization(),wheels[e].sliceSelectedPathCustom.minRadiusPercent=n.sel_min,wheels[e].sliceSelectedPathCustom.maxRadiusPercent=n.sel_max,wheels[e].titleSelectedAttr={},o=0;o<t.length;o++)i.push(t[o].title),a.push(t[o].id);wheels[e].initWheel(i);var s=360/wheels[e].navItemCount,r=90;for(o=0;o<wheels[e].navItemCount;o++)wheels[e].navItems[o].titleRotateAngle=r,r=90-s+s;"outer-nav"==e&&0<t[0].children.length&&makeWheelNav("inner-nav",t[0].children,wheel_nav_params),wheels[e].createWheel();for(var o=counter=0;o<wheels[e].navItemCount;o++)wheels[e].navItems[o].data=t[o],wheels[e].navItems[o].navigateFunction=function(){console.log(),jQuery("#slider").slider("option","value",this.data.notch),setSliderNotch(menus["wheel-menu"].slug_nav[this.data.slug])};menu_raphael[e]=wheels[e].raphael,reposition_screen()}function triggerWheelNav(e){var t=menus["wheel-menu"].data_nav,n=t[e],i=n.dest;"outer-nav"==i?(null!=wheels["inner-nav"]&&wheels[i].navigateWheel(n.slice),popAWheelie("inner-nav"),0<n.children.length&&makeWheelNav("inner-nav",n.children,wheel_nav_params),last_outer_notch=e):"inner-nav"==i?(last_outer_notch!=n.parent?(wheels["outer-nav"].navigateWheel(t[n.parent].slice),makeWheelNav("inner-nav",t[n.parent].children,wheel_nav_params),wheels[i].navigateWheel(n.slice),last_outer_notch=n.parent):(wheels["outer-nav"].navigateWheel(t[n.parent].slice),null!=wheels["inner-nav"]?(wheels[i].navigateWheel(n.slice),null!=wheels["inner-subnav"]&&wheels["inner-subnav"].raphael.remove()):(makeWheelNav("inner-nav",t[n.parent].children,wheel_nav_params),wheels[i].navigateWheel(n.slice)),0<n.children.length?makeWheelNav("inner-subnav",n.children,wheel_nav_params):popAWheelie("inner-subnav")),last_inner_notch=e):"inner-subnav"==i&&(console.log(" innersubnav"),last_outer_notch!=n.grandparent&&(wheels["outer-nav"].navigateWheel(t[n.grandparent].slice),console.log("naviate outer",n,"grand:",t[n.grandparent],"parent",t[n.parent]),last_outer_notch=n.grandparent,popAWheelie("inner-nav"),makeWheelNav("inner-nav",t[n.grandparent].children,wheel_nav_params),wheels["inner-nav"].navigateWheel(t[n.parent].slice),0<t[n.parent].children.length&&(makeWheelNav("inner-subnav",t[n.parent].children,wheel_nav_params),wheels["inner-nav"].navigateWheel(t[n.parent].slice))),last_inner_notch!=n.parent?(console.log("where have I gone wrong?",n,t[n.parent]),wheels["inner-nav"].navigateWheel(t[n.parent].slice),makeWheelNav("inner-subnav",t[n.parent].children,wheel_nav_params),wheels["inner-subnav"].navigateWheel(n.slice),last_inner_notch=n.parent):(console.log(wheels["inner-subnav"]),null==wheels["inner-subnav"].raphael?(console.log("make innersubnav",n,last_inner_notch,t[n.parent]),makeWheelNav("inner-subnav",t[n.parent].children,wheel_nav_params)):(console.log("navigate innersubnav",n,last_inner_notch,t[n.parent]),wheels[i].navigateWheel(n.slice)))),last_dest=i}function popAWheelie(e){"outer-nav"==e?null!=wheels["inner-nav"]&&(wheels["inner-nav"].raphael.remove(),null!=wheels["inner-subnav"]&&wheels["inner-subnav"].raphael.remove()):"inner-nav"==e&&null!=wheels["inner-subnav"]&&wheels["inner-subnav"].raphael.remove()}function initLanguageMenu(e){state.language=languages.default;var t="<ul>";for(var n in languages)if("default"!=n){var i="";n==state.language&&(i=' class="active-language"'),t+='<li id="'+n+'"'+i+">"+languages[n].native+"</li>"}jQuery(e).on("click","li",function(e){for(var t in state.language=jQuery(this).attr("id"),languages)t==state.language?(t!=languages.default&&null==languages[t].data&&getStaticJSON(t,setLanguage,t),changeLanguage(state.language=t),jQuery("#"+t).addClass("active-language")):jQuery("#"+t).removeClass("active-language")}),jQuery(e).html(t)}function retreiveML(e,t,n,i){if("posts"==e){if(null==posts[n].languages||null==posts[n].languages[i])return posts[n][t];var a=posts[n].languages[i].id;return posts[a][t]}}function setLanguage(e,t){for(var n in languages[t].data=e)"page"!=e[n].type&&"post"!=e[n].type&&"project"!=e[n].type||(posts[n]=e[n]);changeLanguage(t)}function changeLanguage(e){}"undefined"!=typeof languages&&initLanguageMenu("#language-menu");